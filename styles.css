:root{--bg:#0f1720;--card:#0b1220;--accent:#60a5fa;--muted:#94a3b8;--glass:rgba(255,255,255,0.03);--line:rgba(255,255,255,0.06)}
:root{--ui-scale:0.9}
*{box-sizing:border-box;font-family:Segoe UI,Roboto,Arial,sans-serif}
body{background:linear-gradient(180deg,#071129 0%,#071322 80%);color:#e6eef8;margin:0}

.ui-scale{position:relative;display:flex;justify-content:center}
.ui-scale-inner{transform:scale(var(--ui-scale));transform-origin:top center;width:100%}

.app-header{display:flex;justify-content:space-between;align-items:center;gap:16px;padding:16px 24px;border-bottom:1px solid var(--line);position:sticky;top:0;background:rgba(7,17,41,0.85);backdrop-filter:blur(8px);z-index:10}
.brand{display:flex;align-items:center;gap:12px}
.logo-img{width:32px;height:32px;border-radius:8px;display:block}
.logo-circle{width:32px;height:32px;border-radius:50%;background:var(--accent);color:#041322;display:flex;align-items:center;justify-content:center;font-weight:800}
.titles{display:flex;flex-direction:column;line-height:1}
.app-title{font-size:16px;font-weight:700}
.app-subtitle{font-size:12px;color:var(--muted)}
.app-nav{display:flex;gap:8px}
.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
.nav-link{display:inline-flex;align-items:center;gap:6px;padding:8px 12px;border-radius:6px;color:#e6eef8;text-decoration:none;background:transparent;border:1px solid var(--line);background:rgba(255,255,255,0.02);cursor:pointer}
.nav-link:hover{background:rgba(255,255,255,0.06)}
.nav-link.active{background:#1f2937;border-color:var(--line)}
.nav-link.disabled{opacity:.5;pointer-events:none}

.app-container{display:grid;grid-template-columns:minmax(520px, 800px) 1fr;gap:16px;padding:16px 24px;max-width:none;margin:0;align-items:start}
.sidebar{background:var(--glass);padding:12px;border-radius:8px;display:flex;flex-direction:column;gap:12px}
.side-card{background:rgba(255,255,255,0.02);border:1px solid var(--line);border-radius:8px;padding:12px}
.side-title{font-size:14px;margin:0 0 8px 0}
.side-row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.side-nav{display:flex;flex-direction:column;gap:6px}
.side-nav .nav-link{display:block;padding:8px 10px;border-radius:6px;color:#e6eef8;text-decoration:none;border:1px solid var(--line);background:rgba(255,255,255,0.02)}
.side-nav .nav-link.active{background:#1f2937}
.side-nav .nav-link:hover{background:rgba(255,255,255,0.06)}
.side-label{display:block;font-size:13px;margin:8px 0 4px;color:var(--muted)}
.side-input{width:100%;padding:6px 8px;border-radius:6px;border:1px solid var(--line);background:#0b1320;color:#e6eef8}
.side-actions{display:flex;gap:8px;margin-top:10px}
.characters-grid{display:flex;flex-wrap:wrap;gap:8px;max-height:460px;overflow:auto;padding:4px}

/* Filters */
.filter-bar{display:flex;flex-wrap:wrap;gap:8px;margin:8px 0}
.filter-bar.compact{gap:6px;margin:6px 0}
.filter-chip{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;border:1px solid var(--line);background:rgba(255,255,255,0.03);color:#e6eef8;cursor:pointer;user-select:none}
.filter-chip:hover{background:rgba(255,255,255,0.06)}
.filter-chip.selected{background:#1f2937;border-color:rgba(255,255,255,0.18)}
.filter-chip .icon{width:18px;height:18px;display:inline-block;flex-shrink:0}
.dimmed{opacity:0.35;filter:grayscale(0.4)}
.filter-break{flex-basis:100%;height:0}

.side-nav{display:flex;flex-direction:column;gap:8px}
.side-nav .nav-link{display:block;width:100%;text-align:left}

.maincol{min-height:60vh}
.view-header{display:none}
.view-content{background:var(--glass);border:1px solid var(--line);border-radius:8px;padding:12px}
.muted{color:var(--muted)}
.view-hint-inline{display:flex;justify-content:flex-end;margin-bottom:6px}

.two-col{display:grid;grid-template-columns:1fr 1fr;gap:16px}
.picker-title{font-weight:600;margin:6px 0}
.tier-member.disabled{opacity:0.4;filter:grayscale(0.6);pointer-events:none}
.tier-member.active{outline:2px solid var(--accent);background:rgba(96,165,250,0.08)}
.two-col > div{background:rgba(255,255,255,0.02);border:1px solid var(--line);border-radius:8px;padding:10px}
.summary-card{background:rgba(255,255,255,0.03);border:1px solid var(--line);border-radius:8px;padding:8px;margin:8px 0}
.summary-head{display:flex;align-items:center;justify-content:space-between;margin-bottom:6px}
.small-btn{padding:4px 8px;background:#1f2937;color:#e6eef8;border:1px solid var(--line);border-radius:6px;cursor:pointer}
.small-btn:hover{opacity:0.95}
.big-btn{padding:8px 12px;font-size:14px;border-radius:8px}

#characters{display:flex;flex-wrap:wrap;gap:8px;max-height:420px;overflow:auto;padding:6px}
.char{padding:6px 10px;border-radius:6px;background:rgba(255,255,255,0.03);cursor:pointer;border:1px solid transparent;display:flex;align-items:center;gap:8px}
.char.selected{background:var(--accent);color:#042033;border-color:rgba(255,255,255,0.06)}
.char img.avatar{width:36px;height:36px;border-radius:8px;object-fit:cover;flex-shrink:0}
button{padding:8px 12px;border-radius:6px;border:0;background:#1f2937;color:#e6eef8;cursor:pointer}
button:hover{opacity:0.95}
#suggestions{margin-top:8px}
.squad{padding:10px;border-radius:6px;background:rgba(0,0,0,0.2);margin-bottom:8px;display:flex;justify-content:space-between;align-items:center}
.squad .left{display:flex;gap:10px;align-items:center}
.squad img.avatar-sm{width:40px;height:40px;border-radius:8px;object-fit:cover}
.squad.clickable{cursor:pointer}
.pill{background:rgba(255,255,255,0.03);padding:6px 8px;border-radius:999px;font-size:13px}
.dps{font-weight:700;color:var(--accent)}
.small{color:var(--muted);font-size:13px}
.squad .right{display:flex;flex-direction:column;gap:6px;align-items:flex-end}
.dps-badge{background:rgba(96,165,250,0.15);color:#cfe6ff;border:1px solid rgba(96,165,250,0.35);padding:4px 8px;border-radius:6px;font-weight:700;font-size:12px}
.team-row.preview{border:1px dashed var(--line);padding:4px 6px;border-radius:6px;background:rgba(255,255,255,0.02)}
.member-pill.missing{background:rgba(220,38,38,0.15);border:1px solid rgba(220,38,38,0.35)}
.member-pill.owned{background:rgba(34,197,94,0.12);border:1px solid rgba(34,197,94,0.35)}

.panel{background:rgba(255,255,255,0.02);padding:8px;margin-top:8px;border-radius:8px}
.team-row{display:flex;gap:10px;align-items:center;padding:6px;border-radius:6px;background:transparent;margin-bottom:8px}
.team-row.clickable{cursor:pointer;border:1px solid var(--line);background:rgba(255,255,255,0.02)}
.team-row.clickable:hover{background:rgba(255,255,255,0.06)}
.team-row.selected{outline:2px solid var(--accent); background:rgba(96,165,250,0.08)}
.team-row .members{display:flex;gap:6px;align-items:center}
.member-pill{padding:4px 8px;background:rgba(255,255,255,0.03);border-radius:6px}
.member-avatar{width:28px;height:28px;border-radius:6px;object-fit:cover}
.team-dps{margin-left:auto;font-weight:700;color:var(--accent)}
.missing-group{display:flex;gap:8px;align-items:center}
.missing-group .avatar-sm{width:28px;height:28px;border-radius:6px;object-fit:cover}
.missing-group .pill{padding:4px 6px;font-size:13px}

.tier-table{width:100%;border-collapse:collapse;margin-top:8px}
.tier-row{display:table-row}
.tier-row td{vertical-align:middle;padding:8px;border-bottom:1px solid rgba(255,255,255,0.03)}
.tier-label{width:160px;display:flex;align-items:center;gap:8px}
.tier-members{display:flex;gap:8px;flex-wrap:wrap}
.pick-row{align-items:center;flex-wrap:nowrap;justify-content:flex-start;width:fit-content;max-width:100%}
.tier-member{display:flex;align-items:center;gap:6px;padding:6px;background:rgba(255,255,255,0.02);border-radius:6px;cursor:pointer}
.tier-badge{width:36px;height:36px;flex-shrink:0}
.tier-member img.avatar{width:28px;height:28px;border-radius:6px;object-fit:cover}
.tier-member .pill{padding:4px 6px;font-size:13px}
.tier-name{font-weight:700}

/* Best Teams styles */
.best-teams-toggle{margin-bottom:12px;display:flex;align-items:center;gap:8px}
.toggle-label{display:flex;align-items:center;gap:8px;font-size:14px;color:var(--muted)}
.toggle-select{width:auto;min-width:150px}
#best-teams-list{margin-top:8px}
.best-team-row{border:1px solid var(--line);background:rgba(255,255,255,0.02);margin-bottom:8px}
.best-team-row:hover{background:rgba(255,255,255,0.04)}

.macro-buttons{display:flex;flex-wrap:wrap;gap:6px;margin-bottom:8px}
.macro-btn{padding:6px 10px;font-size:12px;background:rgba(255,255,255,0.04);border:1px solid var(--line);border-radius:6px;cursor:pointer;color:#e6eef8}
.macro-btn:hover{background:rgba(255,255,255,0.08)}

.char.no-teams{opacity:0.3;filter:grayscale(0.8);cursor:not-allowed;pointer-events:none}
.char.no-teams:hover{background:rgba(255,255,255,0.03)}

@media (max-width: 1280px){
	.app-container{grid-template-columns:minmax(360px, 600px) 1fr}
}
@media (max-width: 960px){
	.app-container{grid-template-columns:1fr}
}

.modal[hidden]{display:none}
.modal{position:fixed;inset:0;z-index:50}
.modal-backdrop{position:absolute;inset:0;background:rgba(0,0,0,0.5);backdrop-filter:blur(2px)}
.modal-dialog{position:relative;margin:4vh auto 0;width:min(96vw,1440px);max-width:1440px;background:#0b1220;border:1px solid var(--line);border-radius:10px;padding:16px}
.modal-header{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
.modal-title{font-weight:700}
.modal-body{max-height:80vh;overflow:auto;background:rgba(255,255,255,0.02);border:1px solid var(--line);border-radius:8px;padding:14px}
.close-btn{background:#1f2937;color:#e6eef8;border:0;border-radius:6px;padding:6px 8px;cursor:pointer}
.close-btn:hover{opacity:0.95}

.team-picker-layout{display:grid;grid-template-columns:minmax(520px, 1fr) 650px;gap:16px}
.picker-grid{display:flex;flex-wrap:wrap;gap:8px;max-height:66vh;overflow:auto;padding:8px}
.team-picker-layout > div:first-child{min-width:0}
.team-picker-layout > div:last-child{min-width:0;overflow:hidden}
